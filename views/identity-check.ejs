<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>EHIC Verifier - Identity Check</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="/" class="nav-brand">EHIC Verifier</a>
            <div class="nav-menu">
                <a href="/" class="nav-link">Home</a>
                <a href="/scanner" class="nav-link">Scanner</a>
                <a href="/history" class="nav-link">History</a>
                <a href="/check-bridge" class="nav-link">Check Bridge</a>
            </div>
        </div>
    </nav>

    <div class="breadcrumb-container">
        <nav class="breadcrumb">
            <a href="/" class="breadcrumb-item completed">
                <span class="step-number">1</span>
                Welcome
            </a>
            <span class="breadcrumb-separator">â†’</span>
            <a href="/treatment-date" class="breadcrumb-item completed">
                <span class="step-number">2</span>
                Treatment Date
            </a>
            <span class="breadcrumb-separator">â†’</span>
            <span class="breadcrumb-item active">
                <span class="step-number">3</span>
                Identity Check
            </span>
            <span class="breadcrumb-separator">â†’</span>
            <span class="breadcrumb-item disabled">
                <span class="step-number">4</span>
                QR Verification
            </span>
            <span class="breadcrumb-separator">â†’</span>
            <span class="breadcrumb-item disabled">
                <span class="step-number">5</span>
                Results
            </span>
        </nav>
    </div>

    <main class="main-content">
        <div class="identity-check-container">
            <!-- Mobile why identity check - shown only on mobile -->
            <div class="mobile-why-identity">
                <div class="info-box">
                    <h3>Why Identity Verification?</h3>
                    <p>Identity verification ensures:</p>
                    <ul>
                        <li>Patient authenticity</li>
                        <li>Fraud prevention</li>
                        <li>Compliance with regulations</li>
                        <li>Accurate treatment records</li>
                    </ul>
                </div>
            </div>

            <div class="form-container">
                <div class="form-header">
                    <h1>Identity Check</h1>
                    <p>Verify patient identity before proceeding with QR code scanning</p>
                </div>

                <div class="identity-instructions">
                    <div class="instruction-card">
                        <div class="instruction-icon">ðŸ†”</div>
                        <div class="instruction-content">
                            <h2>Identity Verification Required</h2>
                            <p>Please request the patient to show his identity card. The Identity needs to match the name, firstname, date of birth on the PRC, and date stored in the QR code. Please make a copy for your records.</p>
                        </div>
                    </div>

                    <div class="verification-checklist">
                        <h3>Verification Checklist</h3>
                        <div class="checklist-items">
                            <label class="checklist-item">
                                <input type="checkbox" id="nameMatch" name="verification">
                                <span class="checkmark"></span>
                                <span class="checklist-text">Name matches PRC and QR code data</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" id="firstnameMatch" name="verification">
                                <span class="checkmark"></span>
                                <span class="checklist-text">First name matches PRC and QR code data</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" id="dobMatch" name="verification">
                                <span class="checkmark"></span>
                                <span class="checklist-text">Date of birth matches PRC and QR code data</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" id="copyMade" name="verification">
                                <span class="checkmark"></span>
                                <span class="checklist-text">Copy made for records</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Mobile next steps - shown only on mobile -->
                <div class="mobile-next-steps">
                    <div class="info-box">
                        <h3>Next Steps</h3>
                        <ol>
                            <li>Scan QR code on PRC card</li>
                            <li>Validate QR code authenticity</li>
                            <li>Complete verification process</li>
                        </ol>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" id="continueToScanning" class="btn btn-primary" disabled>
                        Continue to Scanning the QR Code â†’
                    </button>
                </div>
            </div>

            <div class="info-sidebar">
                <div class="info-box">
                    <h3>Why Identity Verification?</h3>
                    <p>Identity verification ensures:</p>
                    <ul>
                        <li>Patient authenticity</li>
                        <li>Fraud prevention</li>
                        <li>Compliance with regulations</li>
                        <li>Accurate treatment records</li>
                    </ul>
                </div>

                <div class="info-box">
                    <h3>Next Steps</h3>
                    <ol>
                        <li>Scan QR code on PRC card</li>
                        <li>Validate QR code authenticity</li>
                        <li>Complete verification process</li>
                    </ol>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <p>&copy; 2024 EHIC Verifier App - Healthcare Provider Solution</p>
    </footer>

    <style>
        .breadcrumb-container {
            background: #fff;
            border-bottom: 1px solid #e9ecef;
            padding: 1.5rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }

        .breadcrumb {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 0 2rem;
        }

        .breadcrumb-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem;
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            color: #6c757d;
            min-width: 80px;
            max-width: 100px;
            text-align: center;
            line-height: 1.2;
        }

        .breadcrumb-item.active {
            color: #667eea;
        }

        .breadcrumb-item.completed {
            color: #28a745;
            cursor: pointer;
        }

        .breadcrumb-item.completed:hover {
            color: #218838;
        }

        .breadcrumb-item.disabled {
            color: #ced4da;
            cursor: default;
        }

        .breadcrumb-item .step-number {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0;
            transition: all 0.3s ease;
            border: 2px solid #ced4da;
            background: #ced4da;
        }

        .breadcrumb-item.active .step-number {
            background: #667eea;
            border-color: #667eea;
            transform: scale(1.2);
        }

        .breadcrumb-item.completed .step-number {
            background: #28a745;
            border-color: #28a745;
        }

        .breadcrumb-item.completed:hover .step-number {
            background: #218838;
            border-color: #218838;
            transform: scale(1.1);
        }

        .breadcrumb-item.disabled .step-number {
            background: #f8f9fa;
            border-color: #ced4da;
        }

        .breadcrumb-separator {
            color: #ced4da;
            font-size: 1.5rem;
            margin: 0 0.5rem;
            font-weight: bold;
        }

        .identity-check-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 3rem;
        }

        .form-container {
            background: #fff;
            border-radius: 12px;
            padding: 2.5rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .form-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .form-header h1 {
            color: #2c3e50;
            font-size: 2rem;
            margin-bottom: 0.5rem;
            font-weight: 300;
        }

        .form-header p {
            color: #666;
            font-size: 1.1rem;
        }

        .identity-instructions {
            margin-bottom: 2rem;
        }

        .instruction-card {
            display: flex;
            align-items: flex-start;
            gap: 1.5rem;
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 12px;
            border-left: 4px solid #667eea;
            margin-bottom: 2rem;
        }

        .instruction-icon {
            font-size: 3rem;
            flex-shrink: 0;
        }

        .instruction-content h2 {
            color: #2c3e50;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .instruction-content p {
            color: #555;
            line-height: 1.8;
            font-size: 1.1rem;
        }

        .verification-checklist {
            background: #fff;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: 2rem;
        }

        .verification-checklist h3 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
        }

        .checklist-items {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            padding: 0.75rem;
            border-radius: 8px;
            transition: background-color 0.3s ease;
        }

        .checklist-item:hover {
            background: #f8f9fa;
        }

        .checklist-item input[type="checkbox"] {
            display: none;
        }

        .checkmark {
            width: 24px;
            height: 24px;
            border: 2px solid #ddd;
            border-radius: 4px;
            position: relative;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .checklist-item input[type="checkbox"]:checked + .checkmark {
            background: #28a745;
            border-color: #28a745;
        }

        .checklist-item input[type="checkbox"]:checked + .checkmark::after {
            content: "âœ“";
            position: absolute;
            color: white;
            font-size: 16px;
            font-weight: bold;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .checklist-text {
            font-size: 1rem;
            color: #555;
        }

        .form-actions {
            display: flex;
            justify-content: center;
            margin-top: 3rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .info-sidebar {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .info-box {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            border-left: 4px solid #667eea;
        }

        .info-box h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .info-box p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 0.5rem;
        }

        .info-box ul, .info-box ol {
            color: #666;
            padding-left: 1.5rem;
        }

        .info-box li {
            margin-bottom: 0.5rem;
            line-height: 1.5;
        }

        /* Mobile sections - hidden on desktop */
        .mobile-next-steps,
        .mobile-why-identity {
            display: none;
        }

        @media (max-width: 768px) {
            .breadcrumb {
                flex-wrap: wrap;
                justify-content: center;
                gap: 0.5rem;
                padding: 0 1rem;
            }

            .breadcrumb-item {
                padding: 0.3rem;
                font-size: 0.75rem;
                min-width: 60px;
                max-width: 80px;
            }

            .breadcrumb-item .step-number {
                width: 12px;
                height: 12px;
            }

            .breadcrumb-separator {
                font-size: 1.2rem;
                margin: 0 0.25rem;
            }

            .identity-check-container {
                grid-template-columns: 1fr;
                padding: 1rem;
                gap: 2rem;
            }

            .form-container {
                padding: 1.5rem;
            }

            .instruction-card {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }

            .info-sidebar {
                display: none;
            }

            .mobile-why-identity {
                display: block;
                margin: 1.5rem 2rem 0 2rem;
            }

            .mobile-next-steps {
                display: block;
                margin: 2rem 0;
            }

            .mobile-next-steps .info-box,
            .mobile-why-identity .info-box {
                margin-bottom: 0;
            }
        }
    </style>

    <script>
        // Enable continue button only when all checkboxes are checked
        const checkboxes = document.querySelectorAll('input[name="verification"]');
        const continueButton = document.getElementById('continueToScanning');

        function updateButtonState() {
            const allChecked = Array.from(checkboxes).every(checkbox => checkbox.checked);
            continueButton.disabled = !allChecked;
        }

        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', updateButtonState);
        });

        // Handle continue button click
        continueButton.addEventListener('click', function() {
            // Store identity verification data
            const verificationData = {
                nameMatch: document.getElementById('nameMatch').checked,
                firstnameMatch: document.getElementById('firstnameMatch').checked,
                dobMatch: document.getElementById('dobMatch').checked,
                copyMade: document.getElementById('copyMade').checked,
                verifiedAt: new Date().toISOString()
            };

            sessionStorage.setItem('identityVerification', JSON.stringify(verificationData));

            // Navigate to scanner page
            window.location.href = '/scanner';
        });
    </script>
</body>
</html>